<!DOCTYPE HTML>

<html>
	<head>
		<title></title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header" class="alt">
						<span class="logo"><img src="images/logo.svg" alt="" width="10%"/></span>
						<h1>Stocks Analytics</h1>
						<p>Are you looking for stocks investment?<br />
					    Our project will help you discover the right stocks.</p>
					</header>

				<!-- Nav -->
				<nav id="nav">
					<ul>
						<script>
							function saveScrollPosition() {
							  sessionStorage.setItem('scrollPositionReport', window.scrollY);
							}
							
							window.onload = function() {
							  var savedScrollPosition = sessionStorage.getItem('scrollPositionReport');
							  if (savedScrollPosition !== null) {
								window.scrollTo(0, savedScrollPosition);
								sessionStorage.removeItem('scrollPositionReport');
							  }
							};
						</script>
						<li><a href="index.html" onclick="saveScrollPosition()">Introduction</a></li>
						<li><a href="implementation.html" onclick="saveScrollPosition()">Implementation & Download</a></li>
						<li><a href="#wrapper" class="active">Report</a></li>
						<li><a href="conclusion.html" onclick="saveScrollPosition()">Conclusion</a></li>
					</ul>
				</nav>

				<!-- Main -->
					<div id="main">

						<!-- Performance on Cloud -->
							<section id="intro" class="main">
								<div class="spotlight">
									<div class="content">
										<header class="major">
											<h2>Performance on Cloud</h2>
										</header>
										<p>Performance evaluation </p>
										<legend><p>Column x : number of executor and thread</legend>
										<legend>Column y : time it take to finish in second</legend>
										<ul class="actions">
											
											<img tyle="width: 40%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="images/top5HighestGrowth.png" alt="" />

											<section class = "text">
												<p>Calculating the speed up (T sequential /T parallel): </p>
												<p>s = 363,23/71,46 = 5,08 times faster</p>
												<p>s = 363,23/10,155 = 35,76 times faster</p>
												<p>We can see the code run faster with more thread, with a huge gap bewteen 1 and 2 threads and 1 and 8 threads</p>	
											</sections>
										</ul>
										<ul class="actions">
											
											<img tyle="width: 40%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="images/top10MostExpensive.png" alt="" />
											<section class = "text">
												<p>Calculating the speedup (T sequential /T parallel): </p>
												<p>s = 180,676/50,166 = 3,6 times faster</p>
												<p>s = 180,676/9,971= 18,12 times faster</p>
												<p>As mentioned previously, the increase in the number of threads significantly improve the time it takes to run. </p>	
											</sections>
										</ul>
										
									</div>
									
								</div>
						
							</section>

							<section class="main">
								<div class="spotlight">
									<div class="content">
										<header class="major">
											<h2>Results</h2>
											<p></p>
										</header>
										<p><b>1. Top 10 Most Expensive Stock in US (general and year 2021)</b></p>
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top10MostExpensiveUS.png?raw=true" alt="" />
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top10MostExpensiveUSYear2021.png?raw=true" alt="" />
										<p><b>2. Top 10 Most Expensive Stock in China (general and year 2021)</b></p>
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top10MostExpensiveChina.png?raw=true" alt="" />
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top10MostExpensiveChinaYear2021.png?raw=true" alt="" />
										<p><b>3. Top 10 Most Expensive Stock in India (general and year 2021)</b></p>
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top10MostExpensiveIndia.png?raw=true" alt="" />
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top10MostExpensiveIndiaYear2021.png?raw=true" alt="" />
										<p><b>4. Top 10 Highest Growth Stock in US (general and year 2021)</b></p>
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top5HighestGrowthUS.png?raw=true" alt="" />
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top5HighestGrowthUSYear2021.png?raw=true" alt="" />
										<p><b>5. Top 10 Highest Growth Stock in China (general and year 2021)</b></p>
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top5HighestGrowthChina.png?raw=true" alt="" />
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top5HighestGrowthChinaYear2021.png?raw=true" alt="" />
										<p><b>6. Top 10 Highest Growth Stock in India (general and year 2021)</b></p>
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top5HighestGrowthIndia.png?raw=true" alt="" />
										<img style="width: 45%; border: 1px solid #dddddd; padding: 5px; margin-bottom: 10px;" src="https://github.com/ZTH7/ProyectoCLO/blob/main/Result/top5HighestGrowthIndiaYear2021.png?raw=true" alt="" />
									</div>
								</div>
							</section>

						<!-- Advanced function -->
							<section id="cta" class="main">
								<header class="major">
									<h2>Advanced function</h2>
									<p>Through this project, we had the opportunity a lot of new functions about Spark.</p>
								</header>
								<p>
								Some of these functions are:
								<br>
								<br>
								<b>- pyspark.sql.DataFrame.agg:</b> This method is used to perform aggregation operations. It is used to calculate sums, averages, maximums, and other types of aggregates on one or more columns of the DataFrame. 
								<br> <pre><code>df.agg(max(col("close"))) # takes the maximum value of the close column</code></pre>
								<br><b>- pyspark.sql.DataFrame.withColumn:</b> This method is used to add a new column or to replace an existing one with a column expression. 
								<br>
								<br>
								<pre><code>df.withColumn("close", col("close").cast("float")) <br># convert the value in the "close" column from type string to type float</code></pre>
								<br>
								<b>- pyspark.sql.functions.lag:</b> This function is a window function (pyspark.sql.window.lag) and is used to get the value of a column in a previous row. 
								<br>
								<br>
								<pre><code>df.withColumn("prev_value", f.lag(f.col("close"))) # create a column with the previous value of close</code></pre>
								<br>
								<b>- pyspark.sql.functions.to_date:</b> This function is used to convert a column of type String to a column of type Date. We can specify the date format through its second parameter (e.g. dd-MM-yyyy). 
								<br>
								<br>
								<pre><code>df.withColumn("date", f.to_date(df[0])) # convert the values of the "date" column from string to DateType()</code></pre>
								<br>
								<b>- pyspark.sql.DataFrame.drop:</b> This method is used to remove one or more columns. 
								<br>
								<br>
								<pre><code>df.drop("prev_value") # we remove the column "prev_value"</code></pre>
								<br>
								</p>
							</section>

					</div>

				<!-- Footer -->
				<footer id="footer">
					<section>
						<h2>Our commitment</h2>
						<p>As computer science students who are genuinely interested in trading and the stock market, this open source project is product of our interest and our willingness to help people analyze stocks with little prior knowledge.
						</p>
						<ul class="actions">
							<li><a href="conclusion.html" class="button">Learn More</a></li>
						</ul>
					</section>
					<section>
						<h2>Creators</h2>
						<dl class="alt">
							<dt>Lubin</dt>
							<dd><a href="https://itslubin.com">itslubin.com</a></dd>
							<dt>Z</dt>
							<dd><a href="https://github.com/ZTH7/">ZTH7</a></dd>
							<dt>Biao</dt>
							<dd><a href="https://github.com/BiaoChenWeng">BiaoChenWeng</a></dd>
						</dl>
						<ul class="icons">
							<li><a href="https://github.com/ZTH7/ProyectoCLO" class="icon brands fa-github alt"><span class="label">GitHub</span></a></li>
						</ul>
					</section>
					<p class="copyright">&copy; Made with love by: <a href="https://ucm.es">UCM</a> students.</p>
				</footer>


			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
